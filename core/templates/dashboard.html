{% extends "base.html" %}
{% block content %}
<h2>Weight Trend (Last 30 Days)</h2>
<canvas id="weightChart" width="900" height="360"></canvas>


<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
<script>

const labels = {{ dates|safe }};
const weights = {{ weights|safe }};
const ma7 = {{ ma7|safe }};
const ma30 = {{ ma30|safe }};

new Chart(document.getElementById('weightChart').getContext('2d'), {
  type: 'line',
  data: {
    labels,
    datasets: [
      {label:'Weight (kg)', data:weights, borderColor:'rgba(75,192,192,1)', backgroundColor:'rgba(75,192,192,0.15)', tension:0.2},
      {label:'7-Day MA', data:ma7, borderColor:'orange', spanGaps:true},
      {label:'30-Day MA', data:ma30, borderColor:'red', spanGaps:true},
    ]
  },
  options: {
    interaction:{mode:'index',intersect:false},
    scales:{y:{beginAtZero:false, title:{display:true,text:'Weight (kg)'}}}
  }
});
</script>
{% endblock %}
