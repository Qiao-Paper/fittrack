{% extends "base.html" %}
{% block content %}
<h2>Weight trend in the last 30 days</h2>
<canvas id="weightChart" width="860" height="360"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
<script>
const labels = {{ dates|safe }};
const weights = {{ weights|safe }};
const ma7 = {{ ma7|safe }};
const ma30 = {{ ma30|safe }};

new Chart(document.getElementById('weightChart').getContext('2d'), {
  type: 'line',
  data: {
    labels,
    datasets: [
      {label:'weight(kg)', data:weights, borderColor:'rgba(75,192,192,1)', backgroundColor:'rgba(75,192,192,0.2)', tension:0.1},
      {label:'7-Day MA', data:ma7, borderColor:'orange', backgroundColor:'rgba(255,165,0,0.2)', spanGaps:true},
      {label:'30-Day MA', data:ma30, borderColor:'red', backgroundColor:'rgba(255,99,132,0.2)', spanGaps:true},
    ]
  },
  options:{scales:{y:{beginAtZero:false, title:{display:true,text:'weight(kg)'}}}, interaction:{mode:'index', intersect:false}}
});
</script>
{% endblock %}
